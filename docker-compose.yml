version: "3.8"

services:
  # Supabase 로컬 개발은 supabase CLI 사용 권장
  # 아래는 참고용 구성
  
  postgres:
    image: postgres:15-alpine
    container_name: trading-postgres
    restart: unless-stopped
    ports:
      - "5432:5432"
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: trading
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./supabase/migrations:/docker-entrypoint-initdb.d
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U postgres"]
      interval: 10s
      timeout: 5s
      retries: 5

volumes:
  postgres_data:

# 실제 사용시:
# 1. supabase CLI 설치: brew install supabase/tap/supabase
# 2. supabase init
# 3. supabase start
# 
# 로컬 Supabase 접속 정보:
# - PostgreSQL: localhost:54322
# - Studio: localhost:54323
# - API: localhost:54321
