# Trading Platform - Storage

**ê¹€ì¹˜í”„ë¦¬ë¯¸ì—„ ì „ëµ ê°œë°œì„ ìœ„í•œ ë°ì´í„° ìˆ˜ì§‘ ì‹œìŠ¤í…œ**

> ğŸ¯ **ëª©ì **: 3ê°œì›”+ ì‹œì¥ ë°ì´í„°ë¥¼ ì¶•ì í•˜ì—¬ ì•Œê³ ë¦¬ì¦˜ ì „ëµ ê°œë°œì˜ ê¸°ë°˜ ë§ˆë ¨  
> ğŸ³ **ë°°í¬**: Docker ì»¨í…Œì´ë„ˆ â†’ Vultr í´ë¼ìš°ë“œ 24/7 ìš´ì˜

---

## ğŸ“Š ìˆ˜ì§‘ ë°ì´í„°

| ë°ì´í„° | ì†ŒìŠ¤ | ì£¼ê¸° | í…Œì´ë¸” | ìš©ë„ |
|:---|:---|:---|:---|:---|
| **Upbit BTC/KRW** | Upbit API (CCXT) | 1ë¶„ | `kimp_ticks`, `kimp_1m` | ê¹€í”„ ê³„ì‚° |
| **Binance BTCUSDT** | Binance API (CCXT) | 1ë¶„ | `kimp_ticks`, `kimp_1m` | ê¹€í”„ ê³„ì‚° |
| **USD/KRW í™˜ìœ¨** | TradingView (tvDatafeed) | 1ë¶„ | `fx_rates` | í™˜ìœ¨ í•„í„° |
| **Binance í€ë”©ë¹„** | Binance API | 8ì‹œê°„ | `funding_rates` | ë¹„ìš© ë¶„ì„ |

### ê³„ì‚° ì§€í‘œ (ìë™ ìƒì„±)
- **ê¹€í”„ìœ¨ (%)**: `(Upbitê°€ê²© - Binanceê°€ê²©Ã—í™˜ìœ¨) / (Binanceê°€ê²©Ã—í™˜ìœ¨) Ã— 100`
- **Z-Score**: 1ì‹œê°„(60ë¶„) ë¡¤ë§ ìœˆë„ìš° ê¸°ë°˜
- **ë³¼ë¦°ì € ë°´ë“œ**: ê¹€í”„% ì‹œê³„ì—´ ëŒ€ìƒ (20ê¸°ê°„, 2Ïƒ)
- **í™˜ìœ¨ MA**: 12ì‹œê°„ ì´ë™í‰ê· 

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Vultr Cloud (Docker)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚   Upbit     â”‚     â”‚  Binance    â”‚     â”‚ TradingView â”‚           â”‚
â”‚   â”‚  Collector  â”‚     â”‚  Collector  â”‚     â”‚  (tvDatafeed)â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚          â”‚                   â”‚                   â”‚                   â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                              â–¼                                       â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚  Kimp Calculator â”‚                              â”‚
â”‚                    â”‚  + Indicators    â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                             â”‚                                        â”‚
â”‚                             â–¼                                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                    â”‚    Supabase     â”‚                              â”‚
â”‚                    â”‚   (PostgreSQL)  â”‚                              â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  ë‹¤ë¥¸ ë ˆí¬ì—ì„œ ë°ì´í„° í™œìš©      â”‚
              â”‚  â€¢ research: ë°±í…ŒìŠ¤íŠ¸         â”‚
              â”‚  â€¢ order: ì‹¤ì‹œê°„ ì‹ í˜¸         â”‚
              â”‚  â€¢ portfolio: ë¶„ì„            â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
trading-platform-storage/
â”œâ”€â”€ README.md                    # ì´ ë¬¸ì„œ
â”œâ”€â”€ docker-compose.yml           # Docker êµ¬ì„±
â”œâ”€â”€ Dockerfile                   # ì»¨í…Œì´ë„ˆ ë¹Œë“œ
â”œâ”€â”€ .env.example                 # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì‹œ
â”‚
â”œâ”€â”€ src/                         # ì†ŒìŠ¤ ì½”ë“œ
â”‚   â”œâ”€â”€ collectors/              # ë°ì´í„° ìˆ˜ì§‘ê¸°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ upbit_collector.py   # Upbit ê°€ê²© ìˆ˜ì§‘
â”‚   â”‚   â”œâ”€â”€ binance_collector.py # Binance ê°€ê²© + í€ë”©ë¹„
â”‚   â”‚   â””â”€â”€ fx_collector.py      # TradingView í™˜ìœ¨
â”‚   â”‚
â”‚   â”œâ”€â”€ calculators/             # ì§€í‘œ ê³„ì‚°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ kimp_calculator.py   # ê¹€í”„ìœ¨ ê³„ì‚°
â”‚   â”‚   â”œâ”€â”€ zscore_calculator.py # Z-Score ê³„ì‚°
â”‚   â”‚   â””â”€â”€ bb_calculator.py     # ë³¼ë¦°ì € ë°´ë“œ
â”‚   â”‚
â”‚   â”œâ”€â”€ database/                # DB ì—°ê²°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ supabase_client.py   # Supabase í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ models.py            # ë°ì´í„° ëª¨ë¸
â”‚   â”‚
â”‚   â”œâ”€â”€ scheduler/               # ìŠ¤ì¼€ì¤„ëŸ¬
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ jobs.py              # ìˆ˜ì§‘ ì‘ì—… ì •ì˜
â”‚   â”‚
â”‚   â””â”€â”€ main.py                  # ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚
â”œâ”€â”€ supabase/                    # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚   â””â”€â”€ migrations/
â”‚       â”œâ”€â”€ 001_init_schema.sql
â”‚       â”œâ”€â”€ 002_kimp_tables.sql
â”‚       â”œâ”€â”€ 003_fx_tables.sql
â”‚       â””â”€â”€ 004_indicator_tables.sql
â”‚
â”œâ”€â”€ strategies/                  # ì „ëµë³„ ë¬¸ì„œ
â”‚   â””â”€â”€ kimchi_premium/
â”‚       â”œâ”€â”€ DB_SCHEMA.md         # Ver 3.0 ìŠ¤í‚¤ë§ˆ (ë©”ì¸)
â”‚       â””â”€â”€ TRADINGVIEW_FX.md    # í™˜ìœ¨ ìˆ˜ì§‘ ëª…ì„¸
â”‚
â”œâ”€â”€ docs/                        # ë¬¸ì„œ
â”‚   â”œâ”€â”€ IMPLEMENTATION.md        # êµ¬í˜„ ê°€ì´ë“œ (Claude Codeìš©)
â”‚   â””â”€â”€ DEPLOYMENT.md            # Vultr ë°°í¬ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ scripts/                     # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ backup.sh                # DB ë°±ì—…
â”‚   â””â”€â”€ health_check.py          # í—¬ìŠ¤ì²´í¬
â”‚
â””â”€â”€ tests/                       # í…ŒìŠ¤íŠ¸
    â””â”€â”€ test_collectors.py
```

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. í™˜ê²½ ì„¤ì •

```bash
# ë ˆí¬ í´ë¡ 
git clone https://github.com/vsun410/trading-platform-storage.git
cd trading-platform-storage

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘ (Supabase URL, API í‚¤ ë“±)
```

### 2. ë¡œì»¬ í…ŒìŠ¤íŠ¸

```bash
# Docker ë¹Œë“œ & ì‹¤í–‰
docker-compose up --build

# ë¡œê·¸ í™•ì¸
docker-compose logs -f data-collector
```

### 3. Vultr ë°°í¬

```bash
# Vultr ì„œë²„ ì ‘ì†
ssh root@your-vultr-ip

# Docker ì„¤ì¹˜ (Ubuntu)
curl -fsSL https://get.docker.com | sh

# ë ˆí¬ í´ë¡  & ì‹¤í–‰
git clone https://github.com/vsun410/trading-platform-storage.git
cd trading-platform-storage
cp .env.example .env
nano .env  # í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

# ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰
docker-compose up -d
```

---

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

> ìƒì„¸ ìŠ¤í‚¤ë§ˆ: [`strategies/kimchi_premium/DB_SCHEMA.md`](strategies/kimchi_premium/DB_SCHEMA.md)

### í•µì‹¬ í…Œì´ë¸”

| í…Œì´ë¸” | ì„¤ëª… | ì˜ˆìƒ ìš©ëŸ‰ (3ê°œì›”) |
|:---|:---|:---|
| `kimp_ticks` | ì‹¤ì‹œê°„ ê¹€í”„ ë°ì´í„° | ~2.5GB |
| `kimp_1m` | 1ë¶„ë´‰ ì§‘ê³„ | ~130MB |
| `fx_rates` | TradingView í™˜ìœ¨ | ~50MB |
| `fx_filter_log` | í™˜ìœ¨ í•„í„° ìƒíƒœ | ~15MB |
| `zscore_log` | Z-Score ë¡œê·¸ | ~25MB |
| `bb_log` | ë³¼ë¦°ì € ë°´ë“œ ë¡œê·¸ | ~25MB |
| `funding_rates` | Binance í€ë”©ë¹„ | ~1MB |

### ë°ì´í„° ë³´ì¡´ ì •ì±…

| ë°ì´í„° | ë³´ì¡´ ê¸°ê°„ | ì´ìœ  |
|:---|:---|:---|
| `kimp_1m` | **ë¬´ê¸°í•œ** | ë°±í…ŒìŠ¤íŠ¸ í•µì‹¬ |
| `fx_rates` | **1ë…„** | í™˜ìœ¨ ë¶„ì„ |
| `kimp_ticks` | **90ì¼** | ìš©ëŸ‰ ê´€ë¦¬ |
| ì§€í‘œ ë¡œê·¸ | **90ì¼** | ê²€ì¦ìš© |

---

## âš™ï¸ í™˜ê²½ ë³€ìˆ˜

```env
# Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your-anon-key

# ìˆ˜ì§‘ ì„¤ì •
COLLECT_INTERVAL_SECONDS=60
SYMBOLS=BTC

# ì•Œë¦¼ (ì„ íƒ)
TELEGRAM_BOT_TOKEN=your-bot-token
TELEGRAM_CHAT_ID=your-chat-id
```

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§

### í—¬ìŠ¤ì²´í¬

```bash
# ì»¨í…Œì´ë„ˆ ìƒíƒœ
docker-compose ps

# ìµœê·¼ ìˆ˜ì§‘ ë¡œê·¸
docker-compose logs --tail=100 data-collector

# í—¬ìŠ¤ì²´í¬ ìŠ¤í¬ë¦½íŠ¸
python scripts/health_check.py
```

### Supabase ì¿¼ë¦¬

```sql
-- ìµœê·¼ ê¹€í”„ ë°ì´í„° (1ì‹œê°„)
SELECT timestamp, kimp_close, exchange_rate
FROM kimp_1m
WHERE timestamp > NOW() - INTERVAL '1 hour'
ORDER BY timestamp DESC;

-- í™˜ìœ¨ ìˆ˜ì§‘ í˜„í™©
SELECT 
    DATE(timestamp) AS date,
    COUNT(*) AS count
FROM fx_rates
WHERE timestamp > NOW() - INTERVAL '7 days'
GROUP BY DATE(timestamp)
ORDER BY date DESC;
```

---

## ğŸ”— ê´€ë ¨ ë ˆí¬

| ë ˆí¬ | ì—­í•  | ë°ì´í„° ì‚¬ìš© |
|:---|:---|:---|
| [research](https://github.com/vsun410/trading-platform-research) | ì „ëµ ì—°êµ¬ & ë°±í…ŒìŠ¤íŠ¸ | `kimp_1m`, `fx_rates` |
| [order](https://github.com/vsun410/trading-platform-order) | ì£¼ë¬¸ ì‹¤í–‰ & ëŒ€ì‹œë³´ë“œ | ì‹¤ì‹œê°„ ê¹€í”„, ì§€í‘œ |
| [portfolio](https://github.com/vsun410/trading-platform-portfolio) | í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ | ê±°ë˜ ê¸°ë¡, ì„±ê³¼ |

---

## ğŸ“‹ ê°œë°œ ë¡œë“œë§µ

### Phase 1: ê¸°ë³¸ ìˆ˜ì§‘ (í˜„ì¬)
- [x] DB ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- [ ] Upbit ìˆ˜ì§‘ê¸° êµ¬í˜„
- [ ] Binance ìˆ˜ì§‘ê¸° êµ¬í˜„
- [ ] í™˜ìœ¨ ìˆ˜ì§‘ê¸° êµ¬í˜„ (tvDatafeed)
- [ ] Docker íŒ¨í‚¤ì§•

### Phase 2: ì§€í‘œ ê³„ì‚°
- [ ] ê¹€í”„ìœ¨ ê³„ì‚°ê¸°
- [ ] Z-Score ê³„ì‚°ê¸° (1ì‹œê°„ ìœˆë„ìš°)
- [ ] ë³¼ë¦°ì € ë°´ë“œ ê³„ì‚°ê¸°
- [ ] í™˜ìœ¨ í•„í„° ìƒíƒœ ê³„ì‚°

### Phase 3: ì•ˆì •í™” & ë°°í¬
- [ ] APScheduler ìŠ¤ì¼€ì¤„ë§
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ + ì¬ì‹œë„
- [ ] í…”ë ˆê·¸ë¨ ì•Œë¦¼ (ì¥ì• )
- [ ] Vultr ë°°í¬

---

**ë²„ì „**: 3.0  
**ìµœì¢… ìˆ˜ì •**: 2025-12-15
